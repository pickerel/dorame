var saaa={main_win:null,notify_win:null,init_main_win:function(){saaa.main_win=new air_win(null,"main",$("#layout"));win=saaa.main_win;win.stateless=false;win.buttons.close=$("#close-btn");win.buttons.always_on_top=$("#always-top-btn");win.buttons.disable_always_on_top=$("#disable-always-top-btn");win.buttons.change_theme=$(".change-theme-btn");win.buttons.move=$(".movable");var A=new air_win_tray(null,{icon_16:"icons/icon16.png",icon_128:"icons/icon128.png"});A.add_menu_item("Active",function(B){if(nativeWindow.displayState==air.NativeWindowDisplayState.MINIMIZED){win.on_restore()}win.win_handle.visible=true;win.win_handle.activate();win.win_handle.orderToFront()});A.add_menu_item("Exit",function(C,B){saaa.main_win.exit()});win.install_tray(A);win.buttons.tray=$("#tray-btn");win.add_event_listener("close",function(){air.trace("exit, bye.");saaa.main_win.exit()});$("#header a").mousedown(function(){return false});win.init();win.show()},version_check_url:"http://dorame.zduo.net/lastest/versioning.xml",filename:"saaa.air",update:function(){var A=new saaa_updater(saaa.version_check_url,saaa.filename);A.error_handle=function(B,C){$("#update").html("error occured when "+C+"("+B+').<br/><br/><b><a href="#" id="update-link-error">continue</a></b>');$("#update").myslide({container:$("#content"),queue:false,direction:"left",easing:"linear",duration:"500",callback:function(){$("#update-link-error").click(function(){init();return false})}})};A.update_ok_handle=function(){$("#status-icon").hide();$("#update").html("update successful")};A.update_complete_hanlde=function(){air.trace("update complete")};A.update_process_handle=function(B){$("#update-percent").text(B)};A.need_update_or_not_handle=function(B){$("#status-icon").hide();if(B){$("#update").html("A newer version has been found.<br/><br/>version:"+A.lastest_version_info.version+"<br/>release notes:"+A.lastest_version_info.releasenotes+'<br/><br/><b><a href="#" id="update-link-confirm">click herer to update your dorame to lastest version</a></b> <br/><br/>or <a id="update-link-ignore" href="">here</a> to continue current version');$("#update").myslide({container:$("#content"),queue:false,direction:"left",easing:"linear",duration:"500",callback:function(){$("#update-link-confirm").click(function(){$("#update").html("updating progress:<span id='update-percent'>0</span>%");$("#update").myslide({container:$("#content"),queue:false,direction:"left",easing:"linear",duration:"500",callback:function(){$("#status-icon").fadeIn();A.update()}})});$("#update-link-ignore").click(function(){init();return false})}})}else{$("#update").html("There are no newer version avaliable.");$("#update").myslide({container:$("#content"),queue:false,direction:"left",easing:"linear",duration:"500",callback:function(){$("#update").fadeOut("slow",function(){init()})}})}};$("#update").html("Checking for newer version...");$("#status-icon").fadeIn();$("#update").myslide({container:$("#content"),queue:false,direction:"left",easing:"linear",duration:"500",callback:function(){A.check()}})},init_notify_win:function(A){saaa.notify_win=new air_win(A,"notify",$("#layout"));win=saaa.notify_win;win.buttons.close=$("#close-btn");win.init();win.show(function(B){B.slideDown(function(){$(this).fadeIn("slow")})})},};var sandbox_loaded=false;function init(){$("#menu li").hide();hide_all_contents();$(".toolbar li a").each(function(){$(this).mytips({tip_div:$("#btn-tooltip"),text:$(this).attr("title")})});$("#menu-item-about").click(function(){load_content($("#about"),function(){$("#menu-item-back-player").show();$("#menu-item-about").hide();$("#about .title").text(saaa.main_win.application_name+" "+saaa.main_win.application_version)})});$("#menu-item-back-player").click(function(){load_sandbox("http://www.pandora.com/?cmd=mini")});var A=false;load_sandbox("https://www.pandora.com:443/radio/tuner_8_8_0_1_pandora_mini.swf")}function show_sandbox(A,B){$("#mysandbox").myslide({container:$("#content"),queue:false,direction:"left",easing:"linear",duration:"500",callback:function(){$("#status-icon").hide();$("#menu-item-about").show();$("#menu-item-back-player").hide();sandbox_loaded=true;$("#menu").fadeIn()}})}function load_sandbox(A){hide_all_contents();$("#menu").hide();$("#status-icon").fadeIn();if(!sandbox_loaded){var B='<iframe   sandboxRoot="http://localhost/" documentRoot="app:/"></iframe>';$("#mysandbox").html(B);$("#mysandbox iframe").attr("src",A);$("#mysandbox iframe").one("load",function(){show_sandbox()})}else{show_sandbox()}}function load_content(A,B){hide_all_contents();$("#menu").hide();$("#status-icon").fadeIn();A.myslide({container:$("#content"),queue:false,direction:"left",easing:"linear",duration:"1000",callback:function(){if(B){B()}$("#status-icon").hide();$("#menu").fadeIn()}})}function hide_all_contents(){$("#content .content").css("top","-9999px");$("#content .content").css("left","-9999px")};